


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > MonopolyGame</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">&lt;empty package name&gt;</a>
</div>

<h1>Coverage Summary for Class: MonopolyGame (&lt;empty package name&gt;)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">MonopolyGame</td>
<td class="coverageStat">
  <span class="percent">
    92%
  </span>
  <span class="absValue">
    (23/25)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    27.7%
  </span>
  <span class="absValue">
    (61/220)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    49.7%
  </span>
  <span class="absValue">
    (194/390)
  </span>
</td>
</tr>
  <tr>
    <td class="name">MonopolyGame$DiceResult</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (5/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (9/9)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    93.3%
  </span>
  <span class="absValue">
    (28/30)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    27.7%
  </span>
  <span class="absValue">
    (61/220)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50.9%
  </span>
  <span class="absValue">
    (203/399)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;import java.util.ArrayList;
&nbsp;import java.util.List;
&nbsp;import java.util.Random;
&nbsp;import java.util.Scanner;
&nbsp;import java.io.BufferedWriter;
&nbsp;import java.io.FileWriter;
&nbsp;import java.io.IOException;
&nbsp;import java.io.*;
&nbsp;import java.util.*;
&nbsp;
&nbsp;
&nbsp;class Property {
&nbsp;    String name;
&nbsp;    int price;
&nbsp;    int rent;
&nbsp;    boolean owned;
&nbsp;    Player owner;
&nbsp;
&nbsp;    public Property(String name, int price, int rent) {
&nbsp;        this.name = name;
&nbsp;        this.price = price;
&nbsp;        this.rent = rent;
&nbsp;        this.owned = false;
&nbsp;        this.owner = null;
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;class Player {
&nbsp;    String name;
&nbsp;    int money;
&nbsp;    int position;
&nbsp;    boolean inJail;
&nbsp;    int state;
&nbsp;    int bonus;
&nbsp;    List&lt;Property&gt; ownedProperties;
&nbsp;    int jailDay;
&nbsp;    // changesjkljk
&nbsp;    public Player(String name) {
&nbsp;        this.name = name;
&nbsp;        this.money = 1500; // Starting money
&nbsp;        this.position = 0; // Starts on square 0
&nbsp;        this.inJail = false;
&nbsp;        this.state = 0; // 0: first turn, in &#39;GO&#39; doesn&#39;t earn  1500
&nbsp;        // 1: other turn, in &#39;GO&#39; get 1500
&nbsp;        this.bonus = 0;
&nbsp;        this.ownedProperties = new ArrayList&lt;&gt;();
&nbsp;    }
&nbsp;
&nbsp;    public String getName() {
&nbsp;        return name;
&nbsp;    }
&nbsp;
&nbsp;    public void addMoney(int amount) {
&nbsp;        money += amount;
&nbsp;    }
&nbsp;
&nbsp;    public int getMoney() {
&nbsp;        return money;
&nbsp;    }
&nbsp;
&nbsp;    public void setPosition(int position) {
&nbsp;        this.position = position;
&nbsp;    }
&nbsp;
&nbsp;    public int getPosition() {
&nbsp;        return position;
&nbsp;    }
&nbsp;
&nbsp;    public List&lt;Property&gt; getOwnedProperties() {
&nbsp;        return ownedProperties;
&nbsp;    }
&nbsp;
&nbsp;    public void addProperty(Property property) {
&nbsp;        ownedProperties.add(property);
&nbsp;    }
&nbsp;
&nbsp;}
&nbsp;
&nbsp;
&nbsp;public class MonopolyGame {
&nbsp;    public static final int BOARD_SIZE = 20;
&nbsp;    public static Property[] properties;
&nbsp;    public static List&lt;Player&gt; players;
&nbsp;    public static int currentPlayerIndex;
&nbsp;    public int dice1, dice2;
<b class="fc">&nbsp;    public int round = 0;</b>
&nbsp;    public static final int MAXIMUM_ROUND = 100;
&nbsp;
<b class="fc">&nbsp;    public MonopolyGame() {</b>
<b class="fc">&nbsp;        properties = new Property[]{</b>
&nbsp;                new Property(&quot;Go&quot;, 0, 0), // 0
&nbsp;                new Property(&quot;Central&quot;, 800, 90), //  1
&nbsp;                new Property(&quot;Wan Chai&quot;, 700, 65), // 2
&nbsp;                new Property(&quot;Income tax&quot;, 0, 0), // 3
&nbsp;                new Property(&quot;Stanley&quot;, 600, 60), // 4
&nbsp;                new Property(&quot;Just Visiting/In Jail&quot;, 0, 0), // 5
&nbsp;                new Property(&quot;Shek O&quot;, 400, 10), // 6
&nbsp;                new Property(&quot;Mong Kok&quot;, 500, 40), // 7
&nbsp;                new Property(&quot;Chance&quot;, 0, 0), // 8
&nbsp;                new Property(&quot;Tsing Yi&quot;, 400, 15), // 9
&nbsp;                new Property(&quot;Free Parking&quot;, 0, 0), // 10
&nbsp;                new Property(&quot;Shatin&quot;, 700, 75), // 11
&nbsp;                new Property(&quot;Chance&quot;, 0, 0), // 12
&nbsp;                new Property(&quot;Tuen Mun&quot;, 400, 20), // 13
&nbsp;                new Property(&quot;Tai Po&quot;, 500, 25), //14
&nbsp;                new Property(&quot;Go to jail&quot;, 0, 0), // 15
&nbsp;                new Property(&quot;Sai Kung&quot;, 400, 10), //16
&nbsp;                new Property(&quot;Yuen Long&quot;, 400, 25), //17
&nbsp;                new Property(&quot;Chance&quot;, 0, 0), //18
&nbsp;                new Property(&quot;Tai O&quot;, 600, 25) //19
&nbsp;        };
&nbsp;
<b class="fc">&nbsp;        players = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        currentPlayerIndex = 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void addPlayer(String name) {
<b class="fc">&nbsp;        players.add(new Player(name));</b>
&nbsp;    }
&nbsp;
&nbsp;    public static void removePlayer(String name) {
<b class="fc">&nbsp;        players.remove(name);</b>
&nbsp;    }
&nbsp;    public List&lt;Player&gt; getPlayers() {
<b class="fc">&nbsp;        return players;</b>
&nbsp;    }
&nbsp;    public void removeProperty(Player player){
<b class="fc">&nbsp;        for(Property property:player.ownedProperties){</b>
<b class="fc">&nbsp;            property.owned = false;</b>
&nbsp;        }
<b class="fc">&nbsp;        player.ownedProperties.removeAll(player.ownedProperties);</b>
&nbsp;    }
&nbsp;    public void playTurn() {
<b class="nc">&nbsp;        Player currentPlayer = players.get(currentPlayerIndex);</b>
&nbsp;
&nbsp;        // Display the round number
<b class="nc">&nbsp;        if (currentPlayerIndex == 0) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Round &quot; + (round + 1));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println(currentPlayer.name + &quot;&#39;s turn.&quot;);</b>
<b class="nc">&nbsp;        System.out.println(currentPlayer.name + &quot; has $&quot; + currentPlayer.money);</b>
<b class="nc">&nbsp;        Scanner scanner = new Scanner(System.in);</b>
<b class="nc">&nbsp;        boolean turnEnd = false;</b>
&nbsp;
<b class="nc">&nbsp;        while (!turnEnd) {</b>
&nbsp;            // Display formatted player option
<b class="nc">&nbsp;            System.out.printf(&quot;%-35s %-35s%n%-35s %-35s%n%-35s %-35s%n%-35s&quot;, &quot;1. Roll dice&quot;, &quot;2. Save game&quot;, &quot;3. View players&#39; status&quot;, &quot;4. View all players&#39; status&quot;, &quot;5. View game status&quot;, &quot;6. Query next player?&quot;, &quot;7. Quit game\n&quot;);</b>
&nbsp;            //System.out.println(&quot;1. Roll dice 2. Save game \n3. View player status \n4. View all players&#39; status \n5. View game status \n6. Query next player?\n7. Quit game\n (1/2/3/4/5/6/7)&quot;);
<b class="nc">&nbsp;            String input = scanner.nextLine();</b>
&nbsp;
&nbsp;            // 1. Roll dice
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;1&quot;)) {</b>
<b class="nc">&nbsp;                DiceResult result = rollDice();</b>
<b class="nc">&nbsp;                int diceRoll = result.getSum();</b>
<b class="nc">&nbsp;                currentPlayer.bonus = 0;</b>
&nbsp;
<b class="nc">&nbsp;                if (!currentPlayer.inJail &amp;&amp; currentPlayer.state == 0) {</b>
<b class="nc">&nbsp;                    System.out.println(currentPlayer.name + &quot; rolled a &quot; + diceRoll);</b>
<b class="nc">&nbsp;                    currentPlayer.position = (currentPlayer.position + diceRoll) % BOARD_SIZE + 1;</b>
<b class="nc">&nbsp;                    System.out.println(currentPlayer.name + &quot; moved to square &quot; + (currentPlayer.position == 0 ? BOARD_SIZE : currentPlayer.position));</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (!currentPlayer.inJail &amp;&amp; currentPlayer.state == 1) {</b>
<b class="nc">&nbsp;                    System.out.println(currentPlayer.name + &quot; rolled a &quot; + diceRoll);</b>
<b class="nc">&nbsp;                    if ((currentPlayer.position + diceRoll) &gt; BOARD_SIZE) {</b>
<b class="nc">&nbsp;                        currentPlayer.bonus = 1;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if(currentPlayer.position == 0){</b>
<b class="nc">&nbsp;                        currentPlayer.bonus = 1;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    currentPlayer.position = (currentPlayer.position + diceRoll) % BOARD_SIZE;</b>
<b class="nc">&nbsp;                    System.out.println(currentPlayer.name + &quot; moved to square &quot; + (currentPlayer.position == 0 ? BOARD_SIZE : currentPlayer.position));</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                currentPlayer.state = 1;</b>
&nbsp;                //Property property = properties[currentPlayer.position - 1];
<b class="nc">&nbsp;                Property property = properties[(currentPlayer.position - 1 + BOARD_SIZE) % BOARD_SIZE];</b>
&nbsp;
<b class="nc">&nbsp;                if (currentPlayer.bonus == 1) {</b>
<b class="nc">&nbsp;                    handleGo(currentPlayer);</b>
<b class="nc">&nbsp;                    currentPlayer.bonus = 0;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (currentPlayer.position == 1 &amp;&amp; currentPlayer.bonus == 1) {</b>
<b class="nc">&nbsp;                    handleGo(currentPlayer);</b>
<b class="nc">&nbsp;                } else if (currentPlayer.position == 4) {</b>
<b class="nc">&nbsp;                    handleIncomeTax(currentPlayer);</b>
<b class="nc">&nbsp;                } else if (currentPlayer.position == 6) {</b>
<b class="nc">&nbsp;                    if (!currentPlayer.inJail) {</b>
<b class="nc">&nbsp;                        System.out.println(currentPlayer.name + &quot; landed on &quot; + property.name);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    handleJustVisiting(currentPlayer);</b>
<b class="nc">&nbsp;                } else if (currentPlayer.position == 9 || currentPlayer.position == 13 || currentPlayer.position == 19) {</b>
<b class="nc">&nbsp;                    handleChance(currentPlayer);</b>
<b class="nc">&nbsp;                } else if (currentPlayer.position == 11) {</b>
<b class="nc">&nbsp;                    handleFreeParking();</b>
<b class="nc">&nbsp;                } else if (currentPlayer.position == 16) {</b>
<b class="nc">&nbsp;                    handleGoToJail(currentPlayer);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    handleProperty(currentPlayer);</b>
&nbsp;                }
<b class="nc">&nbsp;                turnEnd = true;</b>
&nbsp;            }
&nbsp;
&nbsp;            // save game
&nbsp;
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;2&quot;)) {</b>
<b class="nc">&nbsp;                saveGame();</b>
<b class="nc">&nbsp;                System.exit(0); // Exit the game after saving</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;3&quot;)) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Enter player name:&quot;);</b>
<b class="nc">&nbsp;                String playerName = scanner.nextLine();</b>
<b class="nc">&nbsp;                viewPlayerStatus(playerName);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;4&quot;)) {</b>
<b class="nc">&nbsp;                viewAllPlayersStatus();</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;5&quot;)) {</b>
<b class="nc">&nbsp;                viewGameStatus();</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;6&quot;)) {</b>
<b class="nc">&nbsp;                queryNextPlayer();</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (input.equalsIgnoreCase(&quot;7&quot;)) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;You quit the game.&quot;);</b>
<b class="nc">&nbsp;                System.exit(0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (!input.equalsIgnoreCase(&quot;1&quot;) &amp;&amp; !input.equalsIgnoreCase(&quot;2&quot;) &amp;&amp; !input.equalsIgnoreCase(&quot;3&quot;) &amp;&amp; !input.equalsIgnoreCase(&quot;4&quot;) &amp;&amp; !input.equalsIgnoreCase(&quot;5&quot;) &amp;&amp; !input.equalsIgnoreCase(&quot;6&quot;)) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Invalid option. Please try again.&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        currentPlayerIndex = (currentPlayerIndex + 1) % players.size();</b>
&nbsp;
<b class="nc">&nbsp;        if (currentPlayerIndex == 0) {</b>
<b class="nc">&nbsp;            round++; // Increment the round number after all players have taken their turn</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        System.out.println(&quot;&lt;-- Enter to continue --&gt;&quot;);</b>
<b class="nc">&nbsp;        scanner.nextLine();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void queryNextPlayer() {
<b class="fc">&nbsp;        int nextPlayerIndex = (currentPlayerIndex + 1) % players.size();</b>
<b class="fc">&nbsp;        Player nextPlayer = players.get(nextPlayerIndex);</b>
<b class="fc">&nbsp;        System.out.println(&quot;Next Player: &quot; + nextPlayer.getName());</b>
<b class="fc">&nbsp;        System.out.println(&quot;Money: $&quot; + nextPlayer.getMoney());</b>
<b class="fc">&nbsp;        System.out.println(&quot;Position: &quot; + nextPlayer.getPosition());</b>
<b class="pc">&nbsp;        System.out.println(&quot;In Jail: &quot; + (nextPlayer.inJail ? &quot;Yes&quot; : &quot;No&quot;));</b>
<b class="fc">&nbsp;        System.out.println(&quot;Owned Properties:&quot;);</b>
<b class="pc">&nbsp;        for (Property property : nextPlayer.getOwnedProperties()) {</b>
<b class="nc">&nbsp;            System.out.println(property.name + &quot; (Price: $&quot; + property.price + &quot;, Rent: $&quot; + property.rent + &quot;)&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void viewGameStatus() {
<b class="fc">&nbsp;        System.out.println(&quot;Game Status:&quot;);</b>
<b class="fc">&nbsp;        System.out.println(&quot;Board:&quot;);</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; properties.length; i++) {</b>
<b class="fc">&nbsp;            Property property = properties[i];</b>
<b class="fc">&nbsp;            System.out.print(&quot;Square &quot; + (i + 1) + &quot;: &quot; + property.name);</b>
<b class="fc">&nbsp;            if (property.price &gt; 0) {</b>
<b class="fc">&nbsp;                System.out.print(&quot; (Price: &quot; + property.price + &quot;, Rent: &quot; + property.rent + &quot;)&quot;);</b>
<b class="pc">&nbsp;                if (property.owned) {</b>
<b class="nc">&nbsp;                    System.out.print(&quot; (Owned by &quot; + property.owner.getName() + &quot;)&quot;);</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            System.out.println();</b>
&nbsp;        }
<b class="fc">&nbsp;        System.out.println(&quot;\nPlayers&#39; Positions:&quot;);</b>
<b class="fc">&nbsp;        for (Player player : players) {</b>
<b class="fc">&nbsp;            System.out.println(player.getName() + &quot; is on square &quot; + player.getPosition());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void viewAllPlayersStatus() {
<b class="fc">&nbsp;        for (Player player : players) {</b>
<b class="fc">&nbsp;            System.out.println(&quot;Player Name: &quot; + player.getName());</b>
<b class="fc">&nbsp;            System.out.println(&quot;Money: $&quot; + player.getMoney());</b>
<b class="fc">&nbsp;            System.out.println(&quot;Position: &quot; + player.getPosition());</b>
<b class="pc">&nbsp;            System.out.println(&quot;In Jail: &quot; + (player.inJail ? &quot;Yes&quot; : &quot;No&quot;));</b>
<b class="fc">&nbsp;            System.out.println(&quot;Properties owned:&quot;);</b>
<b class="pc">&nbsp;            for (Property property : player.getOwnedProperties()) {</b>
<b class="nc">&nbsp;                System.out.println(property.name + &quot; (Price: $&quot; + property.price + &quot;, Rent: $&quot; + property.rent + &quot;)&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            System.out.println(); // Add a blank line</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void viewPlayerStatus(String playerName) {
<b class="pc">&nbsp;        for (Player player : players) {</b>
<b class="pc">&nbsp;            if (player.getName().equalsIgnoreCase(playerName)) {</b>
<b class="fc">&nbsp;                System.out.println(&quot;Player Name: &quot; + player.getName());</b>
<b class="fc">&nbsp;                System.out.println(&quot;Money: $&quot; + player.getMoney());</b>
<b class="fc">&nbsp;                System.out.println(&quot;Position: &quot; + player.getPosition());</b>
<b class="pc">&nbsp;                System.out.println(&quot;In Jail: &quot; + (player.inJail ? &quot;Yes&quot; : &quot;No&quot;));</b>
<b class="fc">&nbsp;                System.out.println(&quot;Properties owned: &quot;);</b>
<b class="fc">&nbsp;                for (Property property : player.getOwnedProperties()) {</b>
<b class="fc">&nbsp;                    System.out.println(property.name + &quot; (Price: $&quot; + property.price + &quot;, Rent: $&quot; + property.rent + &quot;)&quot;);</b>
&nbsp;                }
&nbsp;                return;
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        System.out.println(&quot;Player not found.&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    class DiceResult {
&nbsp;        // private int sum;
&nbsp;        private int dice1, dice2, sum;
&nbsp;
&nbsp;        private boolean sameDice;
&nbsp;
<b class="fc">&nbsp;        public DiceResult(int dice1, int dice2, boolean sameDice) {</b>
<b class="fc">&nbsp;            this.dice1 = dice1;</b>
<b class="fc">&nbsp;            this.dice2 = dice2;</b>
<b class="fc">&nbsp;            this.sameDice = sameDice;</b>
<b class="fc">&nbsp;            this.sum = dice1 + dice2;</b>
&nbsp;        }
&nbsp;
&nbsp;        public int getDice1() {
<b class="fc">&nbsp;            return dice1;</b>
&nbsp;        }
&nbsp;
&nbsp;        public int getDice2() {
<b class="fc">&nbsp;            return dice2;</b>
&nbsp;        }
&nbsp;
&nbsp;        public int getSum() {
<b class="fc">&nbsp;            return sum;</b>
&nbsp;        }
&nbsp;
&nbsp;        public boolean isSameDice() {
<b class="fc">&nbsp;            return sameDice;</b>
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    public DiceResult rollDice() {
<b class="fc">&nbsp;        Random rand = new Random();</b>
<b class="fc">&nbsp;        int dice1 = rand.nextInt(4) + 1;</b>
<b class="fc">&nbsp;        int dice2 = rand.nextInt(4) + 1;</b>
<b class="fc">&nbsp;        boolean sameDice = (dice1 == dice2);</b>
<b class="fc">&nbsp;        return new DiceResult(dice1, dice2, sameDice); // Return a new DiceResult object</b>
&nbsp;    }
&nbsp;
&nbsp;    public void handleIncomeTax(Player player) {
<b class="fc">&nbsp;        Property property = properties[player.position];</b>
<b class="fc">&nbsp;        player.money -= 10 * (player.money / 100);</b>
<b class="fc">&nbsp;        System.out.println(&quot;You need to pay 10% income tax!&quot;);</b>
<b class="fc">&nbsp;        System.out.println(&quot;Your money becomes &quot; + player.money);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void handleProperty(Player player) {
<b class="fc">&nbsp;        int Position = (player.position - 1 + BOARD_SIZE) % BOARD_SIZE; //solve out of bound problem</b>
<b class="fc">&nbsp;        Property property = properties[Position];</b>
&nbsp;
<b class="pc">&nbsp;        if (Position == 0) {</b>
&nbsp;            return; // Exit the method so Go will not be treated as property
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (!property.owned) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;You landed on &quot; + property.name + &quot;. Price: &quot; + property.price);</b>
<b class="nc">&nbsp;            if (player.money &gt;= property.price) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Do you want to buy it? (yes/no)&quot;);</b>
<b class="nc">&nbsp;                Scanner scanner = new Scanner(System.in);</b>
<b class="nc">&nbsp;                String input = scanner.nextLine();</b>
<b class="nc">&nbsp;                if (input.equalsIgnoreCase(&quot;yes&quot;)) {</b>
<b class="nc">&nbsp;                    player.money -= property.price;</b>
<b class="nc">&nbsp;                    property.owned = true;</b>
<b class="nc">&nbsp;                    property.owner = player;</b>
<b class="nc">&nbsp;                    player.addProperty(property);</b>
<b class="nc">&nbsp;                    System.out.println(&quot;You bought &quot; + property.name + &quot;. Remaining money: &quot; + player.money);</b>
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Not enough money to buy this property.&quot;);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (property.owned == true &amp;&amp; property.owner == player) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;You landed on your own place &quot; + property.name);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;Property &quot; + property.name + &quot; is owned. Pay rent: &quot; + property.rent);</b>
<b class="nc">&nbsp;            player.money -= property.rent;</b>
<b class="nc">&nbsp;            System.out.println(&quot;Remaining money: &quot; + player.money);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void handleGo(Player player) {
<b class="pc">&nbsp;        if (player.state == 1) {</b>
<b class="fc">&nbsp;            player.money += 1500;</b>
&nbsp;            // System.out.println(&quot;Now you are in the &quot; + player.position);
<b class="fc">&nbsp;            System.out.println(&quot;You have earned 1500 HKD. Now your asset becomes &quot; + player.money);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void handleChance(Player player) {
<b class="fc">&nbsp;        System.out.println(&quot;Now you land on chance!&quot;);</b>
<b class="fc">&nbsp;        Random num = new Random();</b>
<b class="fc">&nbsp;        int amount = (num.nextInt(51) - 30) * 10;</b>
<b class="pc">&nbsp;        if (amount &gt; 0) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;You gained HKD: &quot; + amount);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            System.out.println(&quot;You lost HKD: &quot; + amount);</b>
&nbsp;        }
<b class="fc">&nbsp;        player.addMoney(amount);</b>
<b class="fc">&nbsp;        System.out.println(&quot;Total money: &quot; + player.getMoney());</b>
&nbsp;    }
&nbsp;
&nbsp;    public void handleFreeParking() {
&nbsp;        // System.out.println(&quot;Now you are in the &quot; + player.position);
<b class="fc">&nbsp;        System.out.println(&quot;You landed on Free Parking.&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void handleJustVisiting(Player player) { // Also the state of in jail
<b class="pc">&nbsp;        if(player.jailDay &gt; 3){</b>
<b class="nc">&nbsp;            player.jailDay = 0;</b>
&nbsp;        }
<b class="fc">&nbsp;        player.jailDay++; // jailDay = 1 means Day1 in jail</b>
<b class="pc">&nbsp;        while (player.inJail) { // need to get the value of two dice</b>
<b class="fc">&nbsp;            DiceResult result = rollDice(); // Call the rollDice method</b>
<b class="fc">&nbsp;            int dice1 = result.getDice1();</b>
<b class="fc">&nbsp;            int dice2 = result.getDice2();</b>
<b class="fc">&nbsp;            int sum = dice1 + dice2; // Get the sum of the dice</b>
<b class="fc">&nbsp;            boolean sameDice = result.isSameDice(); // Get the boolean result</b>
<b class="fc">&nbsp;            System.out.println(&quot;First dice &quot; + player.name + &quot; rolled is &quot; + dice1);</b>
<b class="fc">&nbsp;            System.out.println(&quot;Second dice &quot; + player.name + &quot; rolled is &quot; + dice2);</b>
<b class="fc">&nbsp;            if (sameDice) { // player rolled same dice, get out of Jail</b>
<b class="fc">&nbsp;                System.out.println(player.name + &quot; successfully roll a doubles.\n&quot; + player.name + &quot; is released from jail now.&quot;);</b>
<b class="fc">&nbsp;                int position = (6 + sum) % BOARD_SIZE;</b>
<b class="fc">&nbsp;                player.setPosition(position);</b>
<b class="fc">&nbsp;                player.inJail = false;</b>
<b class="fc">&nbsp;                player.jailDay = 0;</b>
&nbsp;                break;
&nbsp;            }
<b class="fc">&nbsp;            System.out.println(&quot;Do you want to pay fine? (yes/no)&quot;);</b>
<b class="fc">&nbsp;            System.out.println(&quot;Remaining money of &quot; + player.name + &quot; is &quot; + player.money);</b>
<b class="fc">&nbsp;            Scanner scanner = new Scanner(System.in);</b>
<b class="fc">&nbsp;            String input = scanner.nextLine();</b>
<b class="pc">&nbsp;            if (input.equalsIgnoreCase(&quot;yes&quot;) &amp;&amp; (player.money &gt; 150)) {</b>
<b class="fc">&nbsp;                player.money -= 150;</b>
&nbsp;
<b class="fc">&nbsp;                player.inJail = false;</b>
<b class="fc">&nbsp;                player.setPosition(player.position + dice1 + dice2);</b>
<b class="fc">&nbsp;                player.jailDay = 0; //release</b>
&nbsp;                break;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            else if(input.equalsIgnoreCase(&quot;no&quot;) &amp;&amp; player.jailDay &lt; 3){ //round 1 and round 2 in jail</b>
<b class="nc">&nbsp;                System.out.println(&quot;Day &quot; + player.jailDay + &quot; in jail...&quot;);</b>
&nbsp;                break;
&nbsp;            }
&nbsp;            else{
<b class="nc">&nbsp;                System.out.println(&quot;Error input! Please try again...&quot;);</b>
&nbsp;            }
<b class="nc">&nbsp;            if(player.jailDay == 3) {</b>
<b class="nc">&nbsp;                if (player.money &gt; 150) {</b>
<b class="nc">&nbsp;                    player.money -= 150;</b>
<b class="nc">&nbsp;                    System.out.println(&quot;You are required to pay a $150 fine to be released from jail now.&quot;);</b>
<b class="nc">&nbsp;                    player.inJail = false;</b>
<b class="nc">&nbsp;                    player.jailDay = 0;</b>
<b class="nc">&nbsp;                    player.setPosition(player.position + dice1 + dice2);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    player.money -= 150;</b>
<b class="nc">&nbsp;                    System.out.println(&quot;You don&#39;t have enough money to pay fine, you are broke!&quot;);</b>
<b class="nc">&nbsp;                    player.inJail = false;</b>
<b class="nc">&nbsp;                    player.jailDay = 0;</b>
<b class="nc">&nbsp;                    removeProperty(player);</b>
<b class="nc">&nbsp;                    removePlayer(player.name);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
&nbsp;
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    // find if player position currently on go to jail(sq 15)
&nbsp;    public void handleGoToJail(Player player) {
<b class="fc">&nbsp;        System.out.println(player.name + &quot; currently landed on [Go to jail]&quot;);</b>
<b class="fc">&nbsp;        System.out.println(player.name + &quot; is sent to jail&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        player.setPosition(6); // move player to in jail square</b>
<b class="fc">&nbsp;        player.inJail = true; // the handle just visiting</b>
&nbsp;        // System.out.println(&quot;Player currently landed on: &quot;);
&nbsp;    }
&nbsp;    // data required to store?
&nbsp;    // round, player info, property info
&nbsp;
&nbsp;    public void saveGame() {
<b class="fc">&nbsp;        String fileName = &quot;monopoly_game_state.csv&quot;;</b>
&nbsp;
<b class="fc">&nbsp;        try (BufferedWriter writer = new BufferedWriter(new FileWriter(fileName))) {</b>
&nbsp;            // Write header
<b class="fc">&nbsp;            writer.write(&quot;Player Name,Money,Position,In Jail,Owned Properties&quot;);</b>
<b class="fc">&nbsp;            writer.newLine();</b>
&nbsp;
&nbsp;            // Write player data
<b class="fc">&nbsp;            for (Player player : players) {</b>
<b class="fc">&nbsp;                StringBuilder sb = new StringBuilder();</b>
<b class="fc">&nbsp;                sb.append(player.getName()).append(&quot;,&quot;)</b>
<b class="fc">&nbsp;                        .append(player.getMoney()).append(&quot;,&quot;)</b>
<b class="fc">&nbsp;                        .append(player.getPosition()).append(&quot;,&quot;)</b>
<b class="fc">&nbsp;                        .append(player.inJail).append(&quot;,&quot;);</b>
&nbsp;
&nbsp;                // Append owned properties
<b class="fc">&nbsp;                List&lt;Property&gt; ownedProperties = player.getOwnedProperties();</b>
<b class="pc">&nbsp;                if (ownedProperties.isEmpty()) {</b>
<b class="fc">&nbsp;                    sb.append(&quot;None&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    for (Property property : ownedProperties) {</b>
<b class="nc">&nbsp;                        sb.append(property.name).append(&quot; Price: $&quot;).append(property.price)</b>
<b class="nc">&nbsp;                                .append(&quot;*Rent: $&quot;).append(property.rent).append(&quot;) (&quot;);</b>
&nbsp;                    }
&nbsp;                    // Remove the trailing comma and space
<b class="nc">&nbsp;                    sb.setLength(sb.length() - 2);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                writer.write(sb.toString());</b>
<b class="fc">&nbsp;                writer.newLine();</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            System.out.println(&quot;Game saved successfully to &quot; + fileName);</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;An error occurred while saving the game: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void loadGame() {
<b class="fc">&nbsp;        String fileName = &quot;monopoly_game_state.csv&quot;;</b>
&nbsp;
<b class="fc">&nbsp;        try (BufferedReader reader = new BufferedReader(new FileReader(fileName))) {</b>
<b class="fc">&nbsp;            String header = reader.readLine(); // Read and ignore the header line</b>
&nbsp;
&nbsp;            String line;
<b class="fc">&nbsp;            while ((line = reader.readLine()) != null) {</b>
<b class="fc">&nbsp;                String[] playerData = line.split(&quot;,&quot;);</b>
&nbsp;
<b class="pc">&nbsp;                if (playerData.length &lt; 5) {</b>
<b class="nc">&nbsp;                    System.out.println(&quot;Invalid data format for player: &quot; + line);</b>
&nbsp;                    continue; // Skip invalid lines
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String playerName = playerData[0].trim();</b>
<b class="fc">&nbsp;                int playerMoney = Integer.parseInt(playerData[1].trim());</b>
<b class="fc">&nbsp;                int playerPosition = Integer.parseInt(playerData[2].trim());</b>
<b class="fc">&nbsp;                boolean inJail = Boolean.parseBoolean(playerData[3].trim());</b>
&nbsp;
&nbsp;                // Add player to the game using the addPlayer method
<b class="fc">&nbsp;                addPlayer(playerName); // Add the player using the method</b>
&nbsp;
&nbsp;                // Initialize the player properties
<b class="fc">&nbsp;                Player player = players.get(players.size() - 1); // Get the last added player</b>
<b class="fc">&nbsp;                player.addMoney(playerMoney - player.getMoney()); // Adjust the player&#39;s money</b>
<b class="fc">&nbsp;                player.setPosition(playerPosition);</b>
<b class="fc">&nbsp;                player.inJail = inJail;</b>
&nbsp;
&nbsp;                // Process owned properties as before...
&nbsp;                // (Keep the owned properties loading logic here)
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            System.out.println(&quot;Game loaded successfully from &quot; + fileName);</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;An error occurred while loading the game: &quot; + e.getMessage());</b>
&nbsp;        } catch (NumberFormatException e) {
<b class="nc">&nbsp;            System.out.println(&quot;Error parsing number in game state: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void modifyGameBoard(int SquareNumber, String name, int price, int rent) {
<b class="fc">&nbsp;        properties[SquareNumber].name = name;</b>
<b class="fc">&nbsp;        properties[SquareNumber].price = price;</b>
<b class="fc">&nbsp;        properties[SquareNumber].rent = rent;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private void designNewGameboard() {
<b class="nc">&nbsp;        Scanner scanner = new Scanner(System.in);</b>
&nbsp;
&nbsp;        // Display the current gameboard
<b class="nc">&nbsp;        System.out.println(&quot;Existing Gameboard:&quot;);</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; properties.length; i++) {</b>
<b class="nc">&nbsp;            Property property = properties[i];</b>
<b class="nc">&nbsp;            System.out.print(&quot;Square &quot; + (i + 1) + &quot;: &quot; + property.name);</b>
<b class="nc">&nbsp;            if (property.price &gt; 0) {</b>
<b class="nc">&nbsp;                System.out.print(&quot; (Price: &quot; + property.price + &quot;, Rent: &quot; + property.rent + &quot;)&quot;);</b>
&nbsp;            }
<b class="nc">&nbsp;            System.out.println();</b>
&nbsp;        }
&nbsp;
&nbsp;        while (true) {
<b class="nc">&nbsp;            System.out.println(&quot;Enter the square number of the property to modify (1-20):&quot;);</b>
&nbsp;            int n;
&nbsp;            try {
<b class="nc">&nbsp;                n = Integer.parseInt(scanner.nextLine()) - 1;</b>
&nbsp;            } catch (NumberFormatException e) {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid property index. Please try again.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (n &gt;= 0 &amp;&amp; n &lt; properties.length &amp;&amp; properties[n].price &gt; 0) {</b>
&nbsp;                while (true) {
<b class="nc">&nbsp;                    System.out.println(&quot;Enter the new name of the property:&quot;);</b>
<b class="nc">&nbsp;                    String name = scanner.nextLine();</b>
&nbsp;
&nbsp;                    // Check if the property name already exists
<b class="nc">&nbsp;                    boolean propertyExists = false;</b>
<b class="nc">&nbsp;                    for (Property property : properties) {</b>
<b class="nc">&nbsp;                        if (property.name.equalsIgnoreCase(name)) {</b>
<b class="nc">&nbsp;                            propertyExists = true;</b>
&nbsp;                            break;
&nbsp;                        }
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (propertyExists) {</b>
<b class="nc">&nbsp;                        System.out.println(&quot;This property already exists in the gameboard. Please enter another name.&quot;);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        System.out.println(&quot;Enter the new price of the property:&quot;);</b>
<b class="nc">&nbsp;                        int price = Integer.parseInt(scanner.nextLine());</b>
&nbsp;
<b class="nc">&nbsp;                        System.out.println(&quot;Enter the new rent of the property:&quot;);</b>
<b class="nc">&nbsp;                        int rent = Integer.parseInt(scanner.nextLine());</b>
&nbsp;
<b class="nc">&nbsp;                        modifyGameBoard(n, name, price, rent);</b>
&nbsp;
<b class="nc">&nbsp;                        System.out.println(&quot;Property modified successfully.&quot;);</b>
&nbsp;                        break;
&nbsp;                    }
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;This is not a property square. Please enter again.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            System.out.println(&quot;1. modify another property square\n2. save the gameboard\n3. start playing on your designed gameboard\n(Enter 1/2/3)&quot;);</b>
<b class="nc">&nbsp;            String nextAction = scanner.nextLine();</b>
&nbsp;
<b class="nc">&nbsp;            if (nextAction.equalsIgnoreCase(&quot;2&quot;)) {</b>
<b class="nc">&nbsp;                saveGameBoard();</b>
&nbsp;
<b class="nc">&nbsp;                System.out.println(&quot;1. Exit\n2. start playing on your designed gameboard\n(Enter 1/2)&quot;);</b>
<b class="nc">&nbsp;                String Choice = scanner.nextLine();</b>
&nbsp;
<b class="nc">&nbsp;                if (Choice.equalsIgnoreCase(&quot;1&quot;)) {</b>
<b class="nc">&nbsp;                    System.exit(0); // Exit the program</b>
&nbsp;
<b class="nc">&nbsp;                } else if (Choice.equalsIgnoreCase(&quot;2&quot;) || nextAction.equalsIgnoreCase(&quot;3&quot;)) {</b>
<b class="nc">&nbsp;                    System.out.println(&quot;Starting the game with the modified gameboard...&quot;);</b>
<b class="nc">&nbsp;                    System.out.println();</b>
&nbsp;                    break; // Exit the loop to start the game
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void saveGameBoard() {
<b class="fc">&nbsp;        String fileName = &quot;gameboard.csv&quot;;</b>
&nbsp;
<b class="fc">&nbsp;        try (BufferedWriter writer = new BufferedWriter(new FileWriter(fileName))) {</b>
<b class="fc">&nbsp;            writer.write(&quot;Square name, Price, Rent&quot;);</b>
<b class="fc">&nbsp;            writer.newLine();</b>
<b class="fc">&nbsp;            for (Property property : properties) {</b>
<b class="fc">&nbsp;                writer.write(property.name + &quot;,&quot; + property.price + &quot;,&quot; + property.rent + &quot;\n&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            System.out.println(&quot;Gameboard saved successfully.&quot;);</b>
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;An error occurred while saving the gameboard.&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void loadGameBoard() {
<b class="fc">&nbsp;        String fileName = &quot;gameboard.csv&quot;;</b>
&nbsp;
<b class="fc">&nbsp;        try (BufferedReader reader = new BufferedReader(new FileReader(fileName))) {</b>
&nbsp;            String line;
<b class="fc">&nbsp;            int index = 0;</b>
&nbsp;
&nbsp;            // Skip the header line
<b class="fc">&nbsp;            reader.readLine();</b>
&nbsp;
<b class="fc">&nbsp;            while ((line = reader.readLine()) != null) {</b>
<b class="fc">&nbsp;                String[] parts = line.split(&quot;,&quot;);</b>
<b class="pc">&nbsp;                if (parts.length == 3) {</b>
<b class="fc">&nbsp;                    String name = parts[0];</b>
<b class="fc">&nbsp;                    int price = Integer.parseInt(parts[1].trim());</b>
<b class="fc">&nbsp;                    int rent = Integer.parseInt(parts[2].trim());</b>
<b class="fc">&nbsp;                    properties[index] = new Property(name, price, rent);</b>
<b class="fc">&nbsp;                    index++;</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            System.out.println(&quot;Gameboard loaded successfully.&quot;);</b>
&nbsp;
<b class="fc">&nbsp;            Scanner scanner = new Scanner(System.in);</b>
&nbsp;            while (true) {
<b class="fc">&nbsp;                System.out.println(&quot;Do you want to modify the loaded gameboard or start playing on it?&quot;);</b>
<b class="fc">&nbsp;                System.out.println(&quot;1. Modify the gameboard\n2. Start playing&quot;);</b>
<b class="fc">&nbsp;                String choice = scanner.nextLine();</b>
&nbsp;
<b class="pc">&nbsp;                if (choice.equals(&quot;1&quot;)) {</b>
<b class="nc">&nbsp;                    designNewGameboard();</b>
&nbsp;                    break;
<b class="pc">&nbsp;                } else if (choice.equals(&quot;2&quot;)) {</b>
<b class="fc">&nbsp;                    System.out.println(&quot;Starting the game with the loaded gameboard...&quot;);</b>
&nbsp;                    break;
&nbsp;                } else {
<b class="nc">&nbsp;                    System.out.println(&quot;Invalid choice. Please enter 1 or 2.&quot;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        } catch (IOException e) {
<b class="nc">&nbsp;            System.out.println(&quot;An error occurred while loading the gameboard.&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static void main(String[] args) throws IOException {
<b class="fc">&nbsp;        MonopolyGame game = new MonopolyGame();</b>
<b class="fc">&nbsp;        Scanner scanner = new Scanner(System.in);</b>
&nbsp;
<b class="fc">&nbsp;        System.out.println(&quot;Hi, Welcome to Monopoly Game!&quot;);</b>
&nbsp;        while (true) {
<b class="fc">&nbsp;            System.out.println(&quot;1. Start a new game\n2. Continue progress from last play&quot;);</b>
<b class="fc">&nbsp;            String choice = scanner.nextLine();</b>
&nbsp;
<b class="pc">&nbsp;            if (choice.equals(&quot;1&quot;) || choice.equals(&quot;2&quot;)) {</b>
<b class="pc">&nbsp;                if (choice.equals(&quot;2&quot;)) {</b>
<b class="nc">&nbsp;                    game.loadGame();</b>
&nbsp;                    break;
&nbsp;                }
&nbsp;                break;
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid choice. Please enter 1 or 2.&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        while (true) {
<b class="fc">&nbsp;            System.out.println(&quot;Do you want to play on an existing gameboard or a custom gameboard? (existing/custom)&quot;);</b>
<b class="fc">&nbsp;            System.out.println(&quot;Note: If you want to continue from your last game, please enter the existing gameboard and select the previous gameboard you played.&quot;);</b>
<b class="fc">&nbsp;            String boardChoice = scanner.nextLine();</b>
&nbsp;
<b class="pc">&nbsp;            if (boardChoice.equalsIgnoreCase(&quot;existing&quot;)) {</b>
&nbsp;                break;
<b class="nc">&nbsp;            } else if (boardChoice.equalsIgnoreCase(&quot;custom&quot;)) {</b>
&nbsp;                while (true) {
<b class="nc">&nbsp;                    System.out.println(&quot;1. Load the gameboard you created before\n2. Create new gameboard&quot;);</b>
<b class="nc">&nbsp;                    String action = scanner.nextLine();</b>
&nbsp;
<b class="nc">&nbsp;                    if (action.equals(&quot;1&quot;)) {</b>
<b class="nc">&nbsp;                        game.loadGameBoard();</b>
&nbsp;                        break;
<b class="nc">&nbsp;                    } else if (action.equals(&quot;2&quot;)) {</b>
<b class="nc">&nbsp;                        game.designNewGameboard();</b>
&nbsp;                        break;
&nbsp;                    } else {
<b class="nc">&nbsp;                        System.out.println(&quot;Invalid choice. Please enter 1 or 2.&quot;);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;                break;
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Invalid choice. Please enter &#39;existing&#39; or &#39;custom&#39;.&quot;);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        List&lt;Player&gt; players = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        String qinput = &quot;1&quot;;</b>
<b class="fc">&nbsp;        int count = 0;</b>
<b class="fc">&nbsp;        String fileName = &quot;monopoly_game_state.csv&quot;;</b>
<b class="fc">&nbsp;        BufferedReader reader = new BufferedReader(new FileReader(fileName));</b>
<b class="fc">&nbsp;        while (reader.readLine() != null) count++;</b>
&nbsp;        reader.close();
<b class="fc">&nbsp;        count-=1;</b>
&nbsp;
<b class="pc">&nbsp;        while (qinput.equals(&quot;1&quot;)) {</b>
<b class="fc">&nbsp;            System.out.println(&quot;1. Enter your name\n2. Generate a random name\n3. Start the game&quot;);</b>
<b class="fc">&nbsp;            String input = scanner.nextLine();</b>
<b class="fc">&nbsp;            String name = null;</b>
&nbsp;
&nbsp;
<b class="pc">&nbsp;            if (input.equals(&quot;1&quot;)) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Please enter your name: &quot;);</b>
<b class="nc">&nbsp;                name = scanner.nextLine();</b>
<b class="nc">&nbsp;                if (!name.trim().isEmpty()) {</b>
<b class="nc">&nbsp;                    game.addPlayer(name);</b>
<b class="nc">&nbsp;                    count++;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    System.out.println(&quot;Invalid name. Please enter your name again.&quot;);</b>
&nbsp;                    continue;
&nbsp;                }
<b class="pc">&nbsp;            } else if (input.equals(&quot;2&quot;)) {</b>
<b class="nc">&nbsp;                String randomName = RandomNameGenerator.generateRandomName();</b>
<b class="nc">&nbsp;                game.addPlayer(randomName);</b>
<b class="nc">&nbsp;                System.out.println(&quot;Your name is: &quot; + randomName);</b>
<b class="nc">&nbsp;                count++;</b>
<b class="pc">&nbsp;            } else if(input.equals(&quot;3&quot;)){</b>
&nbsp;                break;
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Error input! Please enter 1 or 2.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            System.out.println(&quot;1. Add more players\n2. Finish entering names, start the game&quot;);</b>
<b class="nc">&nbsp;            qinput = scanner.nextLine();</b>
&nbsp;        }
&nbsp;
<b class="pc">&nbsp;        if (count &gt;= 2 &amp;&amp; count &lt;= 6) {</b>
<b class="fc">&nbsp;            System.out.println(&quot;Game start&quot;);</b>
<b class="fc">&nbsp;            for (int round = 0; round &lt; 100; round++) {</b>
<b class="pc">&nbsp;                for (int i = 0; i &lt; game.players.size(); i++) {</b>
<b class="nc">&nbsp;                    Player currentPlayer = game.players.get(game.currentPlayerIndex);</b>
<b class="nc">&nbsp;                    if (currentPlayer.money &lt; 0) {</b>
&nbsp;                        // System.out.println(&quot;Sorry, You go bankrupt.&quot;);
<b class="nc">&nbsp;                        game.currentPlayerIndex = (game.currentPlayerIndex + 1) % game.players.size();</b>
<b class="nc">&nbsp;                        game.removeProperty(currentPlayer);</b>
<b class="nc">&nbsp;                        game.removePlayer(currentPlayer.name);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (game.players.size() &lt;= 1) {</b>
<b class="nc">&nbsp;                        Player cPlayer = game.players.get(game.currentPlayerIndex);</b>
<b class="nc">&nbsp;                        System.out.println(cPlayer.name + &quot; wins!&quot;);</b>
<b class="nc">&nbsp;                        System.exit(0);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    game.playTurn();</b>
&nbsp;                }
&nbsp;                // when the 100 rounds end, find out the final winner
<b class="fc">&nbsp;                if(round == 99){</b>
&nbsp;                    
&nbsp;                }
&nbsp;
&nbsp;            }
<b class="fc">&nbsp;            Player winner = game.players.stream().max(Comparator.comparingInt(player -&gt; player.money)).orElse(null);</b>
<b class="pc">&nbsp;            if (winner != null) {</b>
<b class="nc">&nbsp;                System.out.println(&quot;Game over! &quot; + winner.name + &quot; wins! He has the most money!&quot;);</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            System.out.println(&quot;Not enough players to start the game&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-11-21 19:00</div>
</div>
</body>
</html>
